import{d as O,r as y,c as U,o as w,a as v,b as i,e as t,f as J,F as k,g as T,w as m,t as C,v as _,h as x,i as E,j as F,T as A,k as B}from"./index-DkqOrwX1.js";const L={class:"slides-forms"},D={class:"header"},M=["onClick"],X=["onUpdate:modelValue"],j=["onUpdate:modelValue"],P=["onUpdate:modelValue"],R={class:"result"},q={class:"result__title"},z={key:0,class:"modal-wrapper"},G={class:"modal"},H=O({__name:"SliderEditor",props:{type:{}},setup(u){const l=u,n=[{id:1,link:"",text:"",img:""},{id:2,link:"",text:"",img:""}],e=y({slides:structuredClone(n),categories:structuredClone(n),collections:structuredClone(n)}),g=()=>{e.value[l.type].push({id:e.value[l.type][e.value[l.type].length-1].id+1,link:"",text:"",img:""})},h=s=>{e.value[l.type]=e.value[l.type].filter(o=>o.id!==s)},b=()=>{navigator.clipboard.writeText(S.value).then(()=>{alert("Скопировано в буфер обмена!")}).catch(s=>{console.error("Ошибка копирования: ",s)})},S=U(()=>{const s=JSON.stringify(e.value[l.type].map(({link:o,text:a,img:r})=>({link:o,text:a,img:r})));return`const ${l.type} = ${s}`}),f=()=>{localStorage.setItem(`result_${l.type}`,JSON.stringify(e.value[l.type])),alert("Сохранено")},V=()=>{localStorage.removeItem(`result_${l.type}`),e.value[l.type]=n,alert("Очищено")},N=()=>{localStorage.removeItem("result_slides"),localStorage.removeItem("result_collections"),localStorage.removeItem("result_categories"),e.value.slides=structuredClone(n),e.value.collections=structuredClone(n),e.value.categories=structuredClone(n),alert("Очищено всё")};w(()=>{const s=localStorage.getItem("result_slides"),o=localStorage.getItem("result_categories"),a=localStorage.getItem("result_collections");s&&(e.value.slides=JSON.parse(s)),o&&(e.value.categories=JSON.parse(o)),a&&(e.value.collections=JSON.parse(a))});const d=y(!1),p=y(""),$=s=>{const a=s.replace(/[\n\t]/g,"").replace(/;\s*$/,"").trim().replace(/^const\s+\w+\s*=\s*/,"");try{return new Function(`return ${a}`)()}catch(r){return console.error("Error parsing array:",r),null}},I=()=>{const s=$(p.value);s?(e.value[l.type]=s.map((o,a)=>({...o,id:a+1})),d.value=!1,p.value="",f()):alert("Ошибка обработки данных")};return(s,o)=>(i(),v(k,null,[t("div",L,[(i(!0),v(k,null,T(e.value[l.type],(a,r)=>(i(),v("div",{key:`slide_${a.id}_${s.type}`,class:"slides-forms__form"},[t("div",D,[t("span",null,C(r+1),1),t("button",{onClick:c=>h(a.id)},"X",8,M)]),m(t("textarea",{"onUpdate:modelValue":c=>e.value[l.type][r].text=c,placeholder:"Текст на слайде"},null,8,X),[[_,e.value[l.type][r].text]]),m(t("input",{"onUpdate:modelValue":c=>e.value[l.type][r].link=c,placeholder:"Ссылка, куда ведет слайд"},null,8,j),[[_,e.value[l.type][r].link]]),m(t("input",{"onUpdate:modelValue":c=>e.value[l.type][r].img=c,placeholder:"Ссылка на изображение"},null,8,P),[[_,e.value[l.type][r].img]])]))),128)),t("button",{onClick:g},"Добавить")]),t("div",{class:"slides-forms"},[t("button",{class:"button-dark",onClick:f},"Сохранить"),t("button",{onClick:V},"Очистить"),t("button",{onClick:N},"Очистить всё")]),t("div",R,[t("div",q,[o[3]||(o[3]=t("h3",null,"Результат",-1)),t("button",{onClick:o[0]||(o[0]=a=>d.value=!0)},"Вставить контент с сайта")]),t("pre",null,C(S.value),1),t("button",{onClick:b},"Копировать в буфер")]),(i(),J(B,{to:"body"},[x(A,null,{default:E(()=>[d.value?(i(),v("div",z,[t("button",{class:"close",onClick:o[1]||(o[1]=a=>d.value=!1)},"X"),t("div",G,[o[4]||(o[4]=t("h4",null,"Вставка кода с сайта для редактирования",-1)),m(t("textarea",{"onUpdate:modelValue":o[2]||(o[2]=a=>p.value=a),placeholder:"Вставь код между засечек с сайта"},null,512),[[_,p.value]]),t("button",{onClick:I},"Сохранить")])])):F("",!0)]),_:1})]))],64))}}),K=(u,l)=>{const n=u.__vccOpts||u;for(const[e,g]of l)n[e]=g;return n},W=K(H,[["__scopeId","data-v-8dd318f9"]]);export{W as default};
